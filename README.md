# RegTech Assistant

**RegTech Assistant**ëŠ” ì¤‘ì†Œ ì œì¡°ê¸°ì—…ì´ ë³µì¡í•œ ê·œì œ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ê²Œ ì‚¬ì—…ì„ ìš´ì˜í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” AI ê¸°ë°˜ ê·œì œ ì¤€ìˆ˜ ìë™í™” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì‚¬ì—… ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ AIê°€ ì ìš© ê°€ëŠ¥í•œ ê·œì œë¥¼ ìë™ìœ¼ë¡œ ì‹ë³„í•˜ê³ , ì‹¤í–‰ ê°€ëŠ¥í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ ë¦¬ìŠ¤í¬ í‰ê°€, í†µí•© ë³´ê³ ì„œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜

- **ë¹ ë¥¸ ê·œì œ íŒŒì•…**: ì‚¬ì—… ì •ë³´ ì…ë ¥ í›„ 5-10ë¶„ ë‚´ ì ìš© ê·œì œ ìë™ ì‹ë³„
- **ì‹¤í–‰ ê°€ëŠ¥í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸**: ê·œì œë³„ êµ¬ì²´ì  ì¤€ìˆ˜ í•­ëª© ìë™ ìƒì„±
- **ì²´ê³„ì  ì‹¤í–‰ ê³„íš**: ì˜ì¡´ì„±, íƒ€ì„ë¼ì¸, ë§ˆì¼ìŠ¤í†¤ í¬í•¨ ì‹¤í–‰ ê³„íš
- **ë¦¬ìŠ¤í¬ í‰ê°€**: ë¯¸ì¤€ìˆ˜ ì‹œ ë²Œì¹™, ì˜í–¥ë„ ë¶„ì„ ë° ì™„í™” ë°©ì•ˆ ì œì‹œ
- **í†µí•© ë³´ê³ ì„œ**: ê²½ì˜ì§„/ì‹¤ë¬´ì§„/ë²•ë¬´íŒ€ìš© ë§ì¶¤ ë³´ê³ ì„œ ìë™ ìƒì„± (PDF)
- **ëª¨ë“ˆí™” êµ¬ì¡°**: ì¬ì‚¬ìš© ê°€ëŠ¥í•œ Agent ê¸°ë°˜ ì•„í‚¤í…ì²˜

---

## âœ… ì£¼ìš” ê¸°ëŠ¥

- **ë‹¤ì¤‘ ì—ì´ì „íŠ¸ ê·œì œ ë¶„ì„**: LangGraph ìœ„ì—ì„œ 9ê°œì˜ ì—ì´ì „íŠ¸ê°€ ìˆœì°¨ Â· ë³‘ë ¬ë¡œ í˜‘ì—…í•˜ì—¬ ê·œì œë¥¼ ìˆ˜ì§‘, ë¶„ë¥˜, ìš°ì„ ìˆœìœ„í™”í•©ë‹ˆë‹¤.
- **ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸ & ê³„íš**: ê° ê·œì œì— ëŒ€í•´ ë‹´ë‹¹ ë¶€ì„œ, ë§ˆê°ì¼, ì˜ì¡´ì„±ì„ í¬í•¨í•œ ì‹¤í–‰ ê°€ëŠ¥í•œ í•­ëª©ì„ ìë™ ìƒì„±í•©ë‹ˆë‹¤.
- **ë¦¬ìŠ¤í¬ ì¸í…”ë¦¬ì „ìŠ¤**: ë¯¸ì¤€ìˆ˜ ì‹œ ë²Œì¹™Â·ì˜í–¥Â·ì™„í™” ë°©ì•ˆì„ ì •ëŸ‰(ì ìˆ˜)Â·ì •ì„± ì •ë³´ë¡œ ì œê³µí•©ë‹ˆë‹¤.
- **ë³´ê³ ì„œ ìƒì„± & ì´ë©”ì¼ ë°œì†¡**: ë§ˆí¬ë‹¤ìš´/HTML/PDF ë³´ê³ ì„œë¥¼ ë§Œë“¤ê³  ì§€ì •í•œ ìˆ˜ì‹ ìì—ê²Œ Gmail SMTPë¥¼ í†µí•´ ìë™ ì „ì†¡í•©ë‹ˆë‹¤.
- **ëª¨ë“ˆí˜• êµ¬ì¡°**: `regtech_agent` íŒ¨í‚¤ì§€ ë‚´ë¶€ì˜ ì—ì´ì „íŠ¸ì™€ ë…¸ë“œë¥¼ ì¬ì‚¬ìš©í•˜ê±°ë‚˜ êµì²´í•´ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ§  ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜

LangGraph íŒŒì´í”„ë¼ì¸ì€ ë‹¤ìŒ ìˆœì„œë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

```
START â†’ Analyzer â†’ Searcher â†’ Classifier â†’ Prioritizer
     â†˜ï¸                                        â†˜ï¸
     Checklist Generator â†’ Planning Agent â†’ Report Generator â†’ Email Notifier â†’ END
                     â†˜ï¸                      â†—
                       Risk Assessor --------
```

| ë‹¨ê³„ | ì—ì´ì „íŠ¸            | ì—­í•                                                           | ì£¼ìš” ì¶œë ¥           |
| ---- | ------------------- | ------------------------------------------------------------- | ------------------- |
| 1    | Analyzer            | ì‚¬ì—… ì •ë³´ë¥¼ ë¶„ì„í•´ ê·œì œ ê²€ìƒ‰ í‚¤ì›Œë“œë¥¼ 5~10ê°œ ë„ì¶œ             | í‚¤ì›Œë“œ ëª©ë¡         |
| 2    | Searcher            | Tavily APIë¡œ í•œêµ­ ì •ë¶€/ê³µì‹ ì‚¬ì´íŠ¸ ìœ„ì£¼ ê·œì œ ê²€ìƒ‰             | ë¬¸í—Œ ìš”ì•½ + ì¶œì²˜ ID |
| 3    | Classifier          | ê·œì œ ì ìš©ì„± íŒë‹¨ ë° ì¹´í…Œê³ ë¦¬í™”(ì•ˆì „/í™˜ê²½Â·ì œí’ˆ ì¸ì¦Â·ê³µì¥ ìš´ì˜) | ê·œì œ ìƒì„¸ + ê·¼ê±°    |
| 4    | Prioritizer         | ìœ„ë°˜ ìœ„í—˜ë„ë¥¼ ê³ ë ¤í•œ HIGH/MEDIUM/LOW ìš°ì„ ìˆœìœ„ ë¶€ì—¬            | ì •ë ¬ëœ ê·œì œ ë¦¬ìŠ¤íŠ¸  |
| 5    | Checklist Generator | ê° ê·œì œì— ëŒ€í•œ ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸(ë‹´ë‹¹, ë§ˆê°, ë°©ë²•, ê·¼ê±°) ìƒì„±   | ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª©     |
| 6    | Planning Agent      | ì²´í¬ë¦¬ìŠ¤íŠ¸ ê¸°ë°˜ ì¼ì •Â·ì˜ì¡´ì„±Â·ë§ˆì¼ìŠ¤í†¤ ê³„íš ì‘ì„±                | ì‹¤í–‰ ê³„íš           |
| 7    | Risk Assessor       | ë²Œì¹™, ì˜í–¥ë„, ê³¼ê±° ì‚¬ë¡€, ì™„í™” ë°©ì•ˆì„ í¬í•¨í•œ ë¦¬ìŠ¤í¬ Score ì‚°ì¶œ | ë¦¬ìŠ¤í¬ ë¦¬í¬íŠ¸       |
| 8    | Report Generator    | ëª¨ë“  ê²°ê³¼ë¥¼ í†µí•©í•´ Markdown/HTML/PDF ë³´ê³ ì„œ ì‘ì„±              | ë³´ê³ ì„œ íŒŒì¼ ê²½ë¡œ    |
| 9    | Email Notifier      | ë³´ê³ ì„œë¥¼ Gmail SMTPë¡œ ì „ì†¡ (ìˆ˜ì‹ ì CLI ì¸ì/ì‚¬ì—… ì •ë³´)        | ì´ë©”ì¼ ì „ì†¡ ìƒíƒœ    |

> âš¡ï¸ Checklist Generator â†” Planning Agentì™€ Risk AssessorëŠ” ë³‘ë ¬ ì‹¤í–‰ë˜ì–´ ì „ì²´ ì²˜ë¦¬ ì‹œê°„ì„ ë‹¨ì¶•í•©ë‹ˆë‹¤.

---

## ğŸ§° ê¸°ìˆ  ìŠ¤íƒ

- **ì–¸ì–´ & ëŸ°íƒ€ì„**: Python 3.11+
- **ì—ì´ì „íŠ¸ í”„ë ˆì„ì›Œí¬**: LangChain, LangGraph
- **LLM**: OpenAI `gpt-4o-mini`
- **ê²€ìƒ‰**: Tavily API (`langchain-tavily`)
- **ë³´ê³ ì„œ/PDF**: `markdown`, `weasyprint`
- **í™˜ê²½ ë³€ìˆ˜**: `python-dotenv`
- **ë©”ì¼ ì „ì†¡**: Gmail SMTP

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
regtech_agent/
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ analyzer.py
â”‚   â”œâ”€â”€ checklist_generator.py
â”‚   â”œâ”€â”€ classifier.py
â”‚   â”œâ”€â”€ email_notifier.py
â”‚   â”œâ”€â”€ planning.py
â”‚   â”œâ”€â”€ prioritizer.py
â”‚   â”œâ”€â”€ report_generator.py
â”‚   â”œâ”€â”€ risk_assessor.py
â”‚   â””â”€â”€ searcher.py
â”œâ”€â”€ email_utils.py
â”œâ”€â”€ models.py
â”œâ”€â”€ nodes.py
â”œâ”€â”€ utils.py
â””â”€â”€ workflow.py

run_regtech_agent.py               # CLI ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
report/                             # ë³´ê³ ì„œ ì¶œë ¥ ë””ë ‰í„°ë¦¬ (ìë™ ìƒì„±)
```

---

## âš™ï¸ ì„¤ì¹˜ & ì‹¤í–‰

1. **í•„ìˆ˜ ì¡°ê±´**

   - Python 3.11 ì´ìƒ
   - OpenAI API í‚¤ (`gpt-4o-mini` ì‚¬ìš© ê¶Œì¥)
   - Tavily API í‚¤
   - Gmail ê³„ì • + ì•± ë¹„ë°€ë²ˆí˜¸ (2ë‹¨ê³„ ì¸ì¦ ì‹œ í•„ìš”)

2. **ì„¤ì¹˜ ì ˆì°¨**

   ```bash
   git clone <repository-url>
    cd regulation_agent

   python -m venv regtech
   source regtech/bin/activate  # Windows: regtech\Scripts\activate

   pip install -r requirements.txt
   ```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •** (`.env`)

   ```bash
   OPENAI_API_KEY=sk-proj-...
   TAVILY_API_KEY=tvly-...
   GMAIL_SENDER_EMAIL=your.account@gmail.com
   GMAIL_APP_PASSWORD=your_app_password  # ì•± ë¹„ë°€ë²ˆí˜¸ ë˜ëŠ” SMTP ì „ìš© ë¹„ë°€ë²ˆí˜¸
   # ì„ íƒ ì‚¬í•­
   REPORT_RECIPIENT_EMAIL=default@company.com
   LANGSMITH_API_KEY=...
   LANGSMITH_TRACING=true
   ```

4. **ì‹¤í–‰ ë°©ë²•**

   ```bash
   python run_regtech_agent.py [recipient_email]
   ```

   - `recipient_email`ì„ ìƒëµí•˜ë©´ `.env`ì˜ `REPORT_RECIPIENT_EMAIL` ë˜ëŠ” ì‚¬ì—… ì •ë³´ì˜ `contact_email`ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
   - CLI ì¸ìë¡œ ì „ë‹¬í•˜ë©´ í•´ë‹¹ ìˆ˜ì‹ ìì—ê²Œ ë³´ê³ ì„œë¥¼ 1íšŒ ë°œì†¡í•©ë‹ˆë‹¤.

5. **ì¶œë ¥ ê²°ê³¼**
   - `regulation_analysis_result.json` : ì „ì²´ ìƒíƒœ(State) ìŠ¤ëƒ…ìƒ·
   - `report/regulation_report_reason.md` : Markdown ë³´ê³ ì„œ
   - `report/regulation_report_reason.pdf` : PDF ë³´ê³ ì„œ
   - ì½˜ì†” ë¡œê·¸ : ê° ì—ì´ì „íŠ¸ ì§„í–‰ ìƒí™© ë° `email_status`

---

## ğŸ“¬ ì´ë©”ì¼ ì „ì†¡ ë™ì‘

- ë©”ì¼ ë³¸ë¬¸ì€ ì²´í¬ë¦¬ìŠ¤íŠ¸/ì‹¤í–‰ ê³„íš ìš”ì•½, í•µì‹¬ ì¸ì‚¬ì´íŠ¸, ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆì„ í¬í•¨í•œ HTML í…œí”Œë¦¿ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
- ì²¨ë¶€ íŒŒì¼ë¡œ PDF ë³´ê³ ì„œë¥¼ í¬í•¨í•˜ë©°, íŒŒì¼ì´ ì—†ì„ ê²½ìš° ì•ˆë‚´ ë©”ì‹œì§€ì™€ í•¨ê»˜ ë³¸ë¬¸ë§Œ ì „ì†¡í•©ë‹ˆë‹¤.
- ë™ì¼ ì›Œí¬í”Œë¡œì—ì„œ ì¤‘ë³µ ë°œì†¡ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ `email_status.attempted` í”Œë˜ê·¸ë¡œ 1íšŒë§Œ ì „ì†¡í•©ë‹ˆë‹¤.
- Gmail SMTP ì •ì±…ìœ¼ë¡œ ì¸í•´ TLS(587) ì—°ê²°ì´ ì°¨ë‹¨ë˜ë©´ `.env`ì— `SMTP_USE_SSL=1`, `SMTP_PORT=465`ë¥¼ ì¶”ê°€í•´ SSL ëª¨ë“œë¡œ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“¦ JSON ê²°ê³¼ ê°œìš”

```json
{
  "business_info": { ... },
  "keywords": [ ... ],
  "regulations": [ ... ],
  "checklists": [ ... ],
  "execution_plans": [ ... ],
  "risk_assessment": {
    "total_risk_score": 7.6,
    "high_risk_items": [ ... ],
    "recommendations": [ ... ]
  },
  "final_report": {
    "executive_summary": "...",
    "report_pdf_path": "report/regulation_report_reason.pdf"
  },
  "email_status": {
    "recipient": "user@example.com",
    "success": true,
    "attachments": ["regulation_report_reason.pdf"]
  }
}
```

---

## ğŸ”§ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ì´ë“œ

- **ëª¨ë¸ êµì²´**: ê° ì—ì´ì „íŠ¸ ëª¨ë“ˆì—ì„œ `ChatOpenAI(model=...)` ê°’ì„ ë³€ê²½í•©ë‹ˆë‹¤.
- **ê²€ìƒ‰ ë²”ìœ„ ì¡°ì •**: `regtech_agent/utils.py`ì˜ `build_tavily_tool()`ì—ì„œ ê²€ìƒ‰ ë„ë©”ì¸ê³¼ ê²°ê³¼ ìˆ˜ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.
- **ì—ì´ì „íŠ¸ í™•ì¥**: `regtech_agent/workflow.py`ì˜ ê·¸ë˜í”„ ì •ì˜ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•˜ê³  `nodes.py`ì— ëŒ€ì‘ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.
- **CLI í™•ì¥**: `run_regtech_agent.py`ì—ì„œ ì‚¬ì—… ì •ë³´ë¥¼ ì™¸ë¶€ íŒŒì¼/DB ì…ë ¥ìœ¼ë¡œ êµì²´í•˜ê±°ë‚˜ ê²°ê³¼ ê²½ë¡œë¥¼ ì¸ìë¡œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ§ª ìš´ì˜ íŒ

- `.env`ê°€ ë¡œë“œë˜ì§€ ì•Šìœ¼ë©´ LLMÂ·ê²€ìƒ‰Â·SMTP í˜¸ì¶œì´ ì‹¤íŒ¨í•˜ë¯€ë¡œ ì‹¤í–‰ ì „ `print(os.environ.get(...))` ë“±ìœ¼ë¡œ ê°’ì„ í™•ì¸í•˜ì„¸ìš”.
- LangSmithë¥¼ í™œì„±í™”í•˜ë©´ ê° ì—ì´ì „íŠ¸ì˜ í”„ë¡¬í”„íŠ¸ì™€ ì‘ë‹µì„ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- PDF ìƒì„± ì‹œ ì‹œìŠ¤í…œì— í•œê¸€ í°íŠ¸(Noto Sans CJK ë“±)ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§ë©ë‹ˆë‹¤.
